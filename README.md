# 阴阳师自动化工具

这是一个功能强大的自动化工具，专为阴阳师等游戏设计，支持多窗口操作、图像识别、OCR文字识别等功能，可以帮助玩家自动执行各种游戏任务。

## 项目架构

### 核心模块
- **main.py**：主入口文件，包含权限管理、日志设置、硬件ID生成等核心功能
- **tasks/**：各种任务模块，如鼠标点击、键盘输入、延迟、条件控制、OCR识别等
- **task_workflow/**：工作流执行管理，包括执行器和上下文管理
- **services/**：OCR服务相关模块
- **utils/**：工具类，包括窗口操作、输入模拟、坐标处理等
- **ui/**：用户界面相关模块
- **models/**：OCR模型文件

### 支持的任务类型
- **模拟鼠标操作**：点击、移动、滚轮等
- **模拟键盘操作**：按键输入
- **延迟**：控制任务执行节奏
- **条件控制**：根据条件执行不同任务
- **找色功能**：识别屏幕特定颜色
- **OCR文字识别**：识别屏幕文字
- **雷电应用管理**：管理雷电模拟器
- **MuMu应用管理**：管理MuMu模拟器

## 环境要求

### 操作系统
- Windows 7/8/8.1/10/11

### 软件依赖
1. **Python 3.8+**
2. **PySide6**：UI框架
3. **OpenCV**：图像处理
4. **ADB**：Android设备通信（已内置）
5. **FastDeploy**：OCR服务
6. **pyautogui**：鼠标键盘模拟
7. **wmi**：硬件信息获取
8. **keyboard**：键盘事件监听

### 模拟器支持
- **雷电模拟器**：支持多开和应用管理
- **MuMu模拟器**：支持多开和应用管理

## 安装与使用

1. **安装Python依赖**：
   ```bash
   pip install -r requirements.txt
   ```

2. **安装ADB键盘**：
   ```bash
   python setup_adb_keyboard.py
   ```

3. **运行主程序**：
   ```bash
   python main.py
   ```

4. **使用流程**：
   - 打开软件，以管理员权限运行
   - 在UI中创建工作流，添加所需任务
   - 配置任务参数，如坐标、图片路径、文字内容等
   - 点击运行按钮开始执行任务

## 功能特性

- **多窗口支持**：可同时操作多个模拟器窗口
- **智能识别**：结合图像识别和OCR文字识别
- **灵活的工作流**：支持任务编排和条件控制
- **安全可靠**：自动提权获取管理员权限，确保功能正常运行
- **详细日志**：记录操作过程，便于调试和问题排查

## 注意事项

1. **管理员权限**：软件需要管理员权限才能正常使用全局快捷键和窗口操作功能
2. **模拟器设置**：建议将模拟器设置为固定分辨率，以确保坐标识别准确
3. **OCR模型**：首次运行时会加载OCR模型，可能需要一些时间
4. **性能优化**：对于多窗口操作，建议使用性能较好的电脑

## 许可证

本项目使用MIT许可证，不得用于商业用途以及非法用途，使用本项目内的代码需注明出处。

## 交流与支持

- **交流群**：15740321
- **B站ID**：晚安不晚安啦
- **开源视频**：https://www.bilibili.com/video/BV1Ao17BMEw8/?vd_source=dcf05a84482126373d3c681e5062248b

## 二次开发指南

1. **任务模块扩展**：在`tasks/`目录下创建新的任务模块，参考现有模块的实现
2. **服务扩展**：在`services/`目录下添加新的服务模块
3. **工具类扩展**：在`utils/`目录下添加新的工具类
4. **UI扩展**：在`ui/`目录下添加新的UI组件

## 更新日志

- 2025.10.28：全面开源
- 2026.02.24：更新README.md，完善项目文档
